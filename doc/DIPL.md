
### 2.4.2
笛卡儿积 A= {a,b} B = {0,1,2} AxB = {(a,0), (a,1), (a,2), (b,0), (b,1), (b,2)}

令Z和R分别表示整数集和实数集。取样处理可以看成吧xy平面分成一个网格的过程，网格中每个单元的中心坐标是笛卡儿积ZxZ中的一堆元素，ZxZ是所有有序元素对(zi,zj)的集合，zi，zj是Z中的整数

因此如果（x,y）是ZXZ种的整数，且f是把灰度值赋给每个特定坐标对(x,y)的一个函数，则f(x,y)就是一幅数字图像。

显然这种赋值过程就是一个量化处理的过程。灰度值是整数，则用Z代替R，然后数字图像变成一个二维函数，且他的坐标和幅值都是整数。

假设离散灰度级数L = 2^k 是等间隔的，且他们是区间[0,L-1] 内的整数。有时，由灰度跨越的值域称为 动态范围。我们将图像系统的动态范围定义为系统中最大可度量灰度与最小可检测灰度之比。

动态范围上限取决于饱和度，下线取决于噪声。定义一幅图像最高和最低灰度差为对比度。饱和度是值超过这个值的灰度级将被剪掉这样的一个最高值。

### 2.4.3
空间分辨率 是图像中可辨别最小细节的度量 有多种方法说明        没毫米线数对

    每单位距离先 对数 和每单位距离 点数（像素数）    
    每英寸点数：dpi （一般用N表示）

尺寸本身只是在图像容量间作比较才有帮助。？

如果没有规定图像包含的空间维数，那么我们说一幅图像的分辨率为1024x1024像素是没有意义的。

灰度分辨率  是指在灰度级中可分辨的最小变化。

通常说一幅背量化为256级的图像有 8比特（一般用k表示） 的回复分辨率

注：k值的减小带来对比度的增加，可能在人的主观印象上对图片的感觉越好

### 2.4.4   图像内插

内插是在诸如放大，收缩，旋转和几何校正等任务中广泛应用的工具。
近临内插法，把原图像中近邻的灰度，赋值给了每个新位置。  --边缘失真

750x750网格大小收缩到500x500图像一样大，然后网格中的数据取图像中最接近的像素

双线性内插：v(x,y) = ax + by + cxy + d

三次内插 v(x,y) = ∑i1~3 ∑j1~3 (aij * x^i * y^j)

## 2.5 像素间的基本关系
### 2.5.1相邻性
    p(x, y)的四领域 N4(p) 八领域N8(p)

### 2.5.2邻接性，连通性，区域和边界
令v是用于定义邻接性的灰度值合集。则V可能是灰度值（0~255）集合的任何一个子集

     a)4邻接。如果q在集合N4(p)中，则具有V中数值的两个像素p和q是4邻接的。

     b)8邻接。如果q在集合N8(p)中，则具有V中数值的两个像素p和q是8邻接的。

     c)m邻接。如果i)q在N4(p)中，或ii)q在Nd(p)中，且集合N4(p)且N4(q)为空，则具有V中数值的两个像素p和q是m邻接的。
---
### 2.5.3 距离度量
欧几里得 欧式 距离 即直线距离De(p,q)

距离D4(城市街区距离) D4(p,q) = |x-s| + |y-t|    //D4 = 1的像素是（x,y）的四领域

距离D8（棋盘距离） D8 = max(|x-s| ， |y-t|)  D8 = 1的像素是（x,y）的9领域

## 2.6 数字图像处理中用到的数学工具
### 2.6.1阵列/矩阵

阵列相乘 对应位置相乘

矩阵相乘 。。。
### 2.6.2线性操作和 非线性操作
图像处理方法最重要的分类之一是它是线性还是非线性的。

算子定义：对于给定的输入图像 H[f(x,y)] = g(x,y)

 如果H[aifi(x,y) + ajfj(x,y)] = aiH[fi(x,y)] + ajH(fj(x,y)) = aigi(x,y) + ajgj(x,y)

则称H是一个线性算子。（两个等式分别称为 加性，同质性）否则为非线性算子。（比如池化pooling）

线性处理以大量的可用于图像处理的理论实践结果为基础。

非线性应用受到更多限制，但是有些性能会远优于线性操作的非线性图像处理。

## 2.6.3算术操作
噪声处理:（机械噪声）

增强差别:比如碘介质血管X射线造影

图像相乘/除：阴影矫正

### 2.6.4 集合的逻辑操作

#### 基本集合操作
并集，交集，互斥集，差集，

#### 逻辑操作
处理二值图像时，OR/AND和NOT XORT就是普通的并交和求补 异或操作。逻辑一词来自于逻辑理论，在逻辑理论中，1表示真，0表示假

#### 模糊集合
允许用概率来代替0/1的事件

### 2.6.5 空间操作

#### 单像素
以灰度为基础，对单个像素做映射变换
### 邻域
![](DIPL.md.Pic\2.6-21.png)

其中Sxy是大小为mxn，中心在(x,y)的矩形领域中像素的平均值 //可以用来打马赛克么。。。
#### 几何空间变换的图像配准

几何变换改进图像中像素间的空间关系，常称为 橡皮膜变换。

由两个基本操作组成 

i）坐标的空间变换
(x,y) = T{(v,w)}    例如 (x,y) = T{(v,w)} = (v/2, w/2) 在两个方向上把原图缩小一半

仿射变换：
![](DIPL.md.Pic\2.6-23.png)

根据矩阵T中的值，对一组坐标点做尺度/旋转/平移或偏移
 
![](DIPL.md.Pic\Table2.2.jpg)

实际上，我们可以按照两种基本方法来使用仿射变换公式。
向前映射: 扫描输入图像的像素，并在每个位置(v,w)直接计算输出图像中相应像素的空间位置(x,y)构成

反向映射:扫描输出像素的位置，并在每一个位置(x,y)使用(v,w) = T^-1 (x,y) 这样更高效

图像配准：解决图像畸变问题，比如卫星图像照的地球是个球面

有多种模型解决此类问题，最简单的模型比如双线性近似
    
    x = c1 v + c2 w + c3vw + c4
    
    y = c5 v + c6 w + c7vw + c8

四个约束点即可计算c1~c8间的关系。组成一个个四边形。 

一般采用多个四边形覆盖一幅图像，以覆盖不同区域的不同畸变程度。

比如二维码扫描的初步处理


### 2.6.6 向量与矩阵

像素向量z 和一个任意点a 在n维空间的欧式距离D可以用一个向量积来定义：

![](DIPL.md.Pic\2.6-27.jpg)

向量范数，表示为 ||z - a||

像素向量的另一个重要优点是由下式表示的线性变换

    w = A(z - a)        //A是mxn的矩阵 z和a是 nx1大小的列向量。 

### 2.6.7 图像变换

二维线性变换 

![](DIPL.md.Pic\2.6-30.jpg)

其中f(x,y) 是输入图像 r(x,y,u,v)正变换核，

### 2.6.8 概率方法
 
xxx只是一些介绍性文字和举例

# 3 灰度变换与空间滤波

## 3.1 背景知识
### 3.1.1 灰度变换和空间滤波基础

空间域技术直接在图像像素上操作。对于频率域来说，其操作在图像的傅里叶变换上执行，而不针对图像本身。

空间滤波：对图像序列进行逐像素的扫描
领域与预定义的操作 一起被称为 空间滤波器 （或 空间掩膜，核，窗口或模板）
在领域中执行的操作类型决定了滤波处理的特性。

### 3.1.2 关于本章中的例子
多是图像增强应用。对图像加工，使其结果对于**特定**的应用比原始图像更适合的一种处理。（意味着增强技术是面对问题的。）

### 3.2 一些基本的灰度变换函数
#### 3.2.1 图像反转
图像灰度变化 s = L -1 -r    (比如X光分离)

其中s是目标灰度，[0,L-1]是灰度级数范围 r是源的灰度

#### 3.2.2 对数变换
通用形式为 s = c log(1 + r)

其中c是一个常数。该变换将输入中范围较窄的地灰度值映射为输出中较宽范围的灰度值，相反地，对搞得输入灰度值也是如此。我们使用这种类型的变换来扩展图像中暗像素的值。

#### 3.2.3 伽马变换 （幂律变换）
通用形式 s = c r^y 

其中c 和y均为正常数

#### 3.2.4 分段线性变换函数
优点是分段线性函数的形式可以是任意复杂的。

缺点是技术说明明确要求用户输入

##### 对比度拉伸

##### 比特平面分层
把一幅图像分解为比特平面，对于分析图像中每个比特的相对重要性是很有用,这一处理可帮助我们确定用于该图像的比特数的充分性。此外这种类型的分解对图像压缩也很有作用，在图像压缩中，重建一幅图像时，所用的平面要比全部平面少。

### 3.3 直方图处理

最简单有效的工具之一。
#### 3.3.1 直方图均衡
目标灰度 ps(s) = 1 / (L - 1)

![](DIPL.md.Pic\3.3-8.png) MN是图像中像素个数 nk是图像中灰度为rk的像素个数

输出图像通过公式3.3-8 将输入图像中灰度级为rk的各像素映射到输出图像中灰度级为sk的对应像素得到。在这个公式中，变换T(rk)称为直方图均衡或 直方图线性变换。
 
一幅图的直方图与原图灰度值映射公式，直接由密度公式求得。

#### 3.3.2 直方图匹配 （规定化）






























